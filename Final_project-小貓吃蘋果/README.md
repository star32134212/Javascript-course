## JavaScript Term Project：小貓上下樓梯

### 0513404 姜林寬

### 遊戲主畫面
![](https://i.imgur.com/xvmNLe3.png)  
左上角顯示分數，右上角分別有小貓的血量(Life)、跳躍用的能量(Power)、座標位置(cat_x,cat_y)。遊戲畫面分為左右兩塊，右邊的台階會往下移動，左邊的台階會往上移動，小貓會從中間的起始平台開始，選擇合適的時機跳下便開始遊戲。撞到天花板的尖刺減**3**生命，掉到遊戲畫面底部直接出局。左右兩區各有三顆蘋果可以吃，吃蘋果有益身體健康，可以補血補能量。  

### 系統功能

* 基本操作：
    * `左` `右`移動，`上`消耗能量跳起來
    * 基本血量 10
    * 基本能量 10
    * 基礎體重 37
    
* 結束條件：
    * 血量歸0
    * 掉到畫面底部

* 多種類平面：
    * 尖刺平面：站上去減**3**生命
    * 普通平面(藍)：站上去加**1**生命
    * 能量平面(棕)：站上去加**2**能量
    * 左輸送帶：站上去會被向左運輸
    * 右輸送帶：站士去會被向右運輸
    * 彈跳床：站上去的期間會不斷彈跳

* 能量跳：
小貓可消耗**3**能量向上跳躍一段距離，是本遊戲的要拿高分的關鍵  

* 吃蘋果：
每過一段時間隨機在地圖某處生成一粒蘋果，地圖左半由於難度較高，吃到蘋果得**2**分，右半部的蘋果則是**1**分  

* 體重過重系統：
每吃一粒蘋果，小貓會變肥，寬度變寬，雖然夠容易從邊上站上平台，但不同體重將有一定的機率踩壞地板往下掉，因此即使踩到台階也不能鬆懈，踩空時可以借用一踩到台階的瞬間馬上跳起來  

變肥了~  
![](https://i.imgur.com/w1jY4GL.png)  

### 系統開發平台
使用Mac的Visual Studio Code開發、javascript全部寫在canvas上、使用Google Chrome執行

### 程式說明
#### Html
![](https://i.imgur.com/h6WoEmu.png)  
這部分非常簡單，創建一個canvas，剩下的都是在js處理。  

#### JavaScript
##### 創建物件--貓咪
基本參數設定如下：  
![](https://i.imgur.com/DcXz7Ks.png)  

貓咪畫圖：包含依照貓咪的status改變其動作、畫血量、能量和座標值  
![](https://i.imgur.com/cAkEgtq.png)  

其他此物件的方法：設定重力、改變血量、改變能量  
![](https://i.imgur.com/gF9QRUF.png)  

##### 創建物件--平台
基本參數設定如下：  
![](https://i.imgur.com/0ZW3VKs.png)  

讓平台移動，左右兩半部移動方向不同分開寫，如果touch==1代表有接觸到貓咪，就帶著貓一起移動，超出遊戲畫面範圍的平台active會被設為flase，若此時還有貓在上面若在右半部會扣血，左半部會直接出局。  
![](https://i.imgur.com/WPJjcen.png)  

依照種類的不同畫出不同的平台：  
![](https://i.imgur.com/3GMhMAF.png)  

每個種類踩到都有不同的事發生：  
![](https://i.imgur.com/D4ofNTP.png)  
![](https://i.imgur.com/ZOjZ2d1.png)  

##### 創建物件--蘋果
基本參數設定和畫蘋果、偵測是否碰到兩種方法：  
![](https://i.imgur.com/vPA1FPu.png)  

##### 是否觸碰到--touch()
判斷各種觸碰到的狀況，包括由於貓太肥導致的不算在判定內
![](https://i.imgur.com/YWdbQt2.png)  
![](https://i.imgur.com/Jt91vM8.png)  

##### 其他
設定鍵盤按鍵--左右上的按下和放開  
![](https://i.imgur.com/zBfXp7T.png)  

畫出場地、分數及偵測是否符合遊戲結束條件  
![](https://i.imgur.com/WWGgZYY.png)  

跳起來的function，跳躍時消耗Power，除了要抵消重力外還要給一個往上的速度，希望未來可以多做加速度  
![](https://i.imgur.com/lwgN2Gj.png)  

定時生成新蘋果及新台階，隨機屬性與位置，另外每次更新都判定是否遊戲結束(GGdetection())  
![](https://i.imgur.com/mRGXJEK.png)  

每秒定時畫圖，觸法上面寫到的各function  
![](https://i.imgur.com/n9Qvvgt.png)  
![](https://i.imgur.com/HrqTucy.png)  




### 心得
這個遊戲是從一款非常有名的遊戲--小朋友下樓梯延伸的，當初在網路上看到有人提供圖片素材包跟大致程式邏輯應該如何實現的教學，有很多方法都可以寫，最終決定使用之前作業也用過的canvas來實作，原本是想讓小貓可以在地圖間飛來飛去吃東西，然後左右兩邊有不同的重力場，不過只做出固定速度，現實中應該還要包含重力加速度，有試著實作，但運算變得很複雜，怕來不及做出來，因此先做沒有加速度的版本。得意的成果應該就是能讓小貓跳來跳去吃蘋果這目標有完成，然後我覺得吃的蘋果越多會變越肥，有可能把平台踩壞這部分蠻有趣的，有種貪食蛇的感覺。

### 其他幫助老師了解的事
遊戲是從離開初始平台才算開始，所以不能在一開始的平台使用跳，遊戲開始後還是可以跳回一開始的平台。因為此遊戲是我上網找別人提供的圖片素材加上自己手刻的canvas，重力加速度的部分實現上較為困難。